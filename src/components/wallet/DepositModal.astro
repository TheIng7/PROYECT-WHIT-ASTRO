---
// src/components/wallet/DepositModal.astro
---

<div id="depositModal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="closeDepositModal()">&times;</span>
    <h2>Recargar Saldo</h2>
    
    <div class="deposit-methods">
      <div class="method-card" onclick="selectMethod('card')">
        <span>üí≥ Tarjeta</span>
      </div>
      <div class="method-card" onclick="selectMethod('transfer')">
        <span>üè¶ Transferencia</span>
      </div>
      <div class="method-card" onclick="selectMethod('pse')">
        <span>üì± PSE</span>
      </div>
    </div>
    
    <div class="amount-selector">
      <h3>Selecciona el monto</h3>
      <div class="amount-buttons">
        <button class="amount-btn" onclick="selectAmount(10000)">$10,000</button>
        <button class="amount-btn" onclick="selectAmount(50000)">$50,000</button>
        <button class="amount-btn" onclick="selectAmount(100000)">$100,000</button>
        <button class="amount-btn" onclick="selectAmount(500000)">$500,000</button>
      </div>
      
      <div class="custom-amount">
        <input type="number" id="customAmount" placeholder="Otro monto" />
      </div>
    </div>
    
    <button class="btn-confirm" onclick="processDeposit()">Confirmar Recarga</button>
  </div>
</div>

<script>
  let selectedMethod = '';
  let selectedAmount = 0;
  
  function selectMethod(method) {
    selectedMethod = method;
    document.querySelectorAll('.method-card').forEach(card => {
      card.classList.remove('selected');
    });
    event.target.closest('.method-card').classList.add('selected');
  }
  
  function selectAmount(amount) {
    selectedAmount = amount;
    document.querySelectorAll('.amount-btn').forEach(btn => {
      btn.classList.remove('selected');
    });
    event.target.classList.add('selected');
  }
  
  function processDeposit() {
    if (selectedMethod && selectedAmount > 0) {
      // Aqu√≠ integrar√≠as con tu store
      console.log(`Recarga de $${selectedAmount} via ${selectedMethod}`);
      // addBalance(selectedAmount);
      closeDepositModal();
    } else {
      alert('Selecciona m√©todo y monto');
    }
  }
</script>

<style>
  .modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.5);
  }
  
  .modal-content {
    background-color: #1a1a1a;
    margin: 5% auto;
    padding: 2rem;
    border-radius: 12px;
    width: 90%;
    max-width: 500px;
    color: white;
  }
  
  .method-card {
    border: 2px solid #333;
    padding: 1rem;
    border-radius: 8px;
    cursor: pointer;
    margin: 0.5rem 0;
    transition: all 0.3s;
  }
  
  .method-card.selected {
    border-color: #00c853;
    background-color: rgba(0, 200, 83, 0.1);
  }
  
  .amount-btn {
    background: #333;
    color: white;
    border: none;
    padding: 0.5rem 1rem;
    margin: 0.25rem;
    border-radius: 6px;
    cursor: pointer;
  }
  
  .amount-btn.selected {
    background: #00c853;
  }
</style>